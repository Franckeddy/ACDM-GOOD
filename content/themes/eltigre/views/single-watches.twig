{% extends "base.twig" %}

{% block content %}
	{% for post in posts %}
		<!-- ===== DESKTOP ===== -->
		<div class="content-wrapper content-wrapper-desktop">
			<article class="post-type-{{ post.post_type }} single__watches desktop" id="post-{{ post.ID }}">
				<div class="single__watches--container" >
					<div class="single__watches-images">
						{% if post.images is not empty %}
							{% for key, galerie in post.images %}
							<a href="{{ Image(galerie).src }}" data-lightbox="watches">
								<img 
									src="{{ Image(galerie).src }}"
									srcset="{{ Image(galerie).src }}"
									alt="{{ Image(galerie).alt }}"
									id="watch-{{key}}"
								/>
							</a>
							{% endfor %}
						{% else %}
						<a href="{{ Image(post.thumbnail).src }}" data-lightbox="watch">
							<img
							src="{{ Image(post.thumbnail).src }}"
							srcset="{{ Image(image).src }}"
							alt="{{ Image(image).alt }}"
							/>
						</a>
						{% endif %}
					</div>
				</div>
				<div class="single__watches__text-part-wrapper">
					<div class="single__watches__text-part">
						<h1 class="single__watches__title" style="margin: unset!important;">
							{{ post.title }}
						</h1>
						<div class="single__watches__content">
							{{ post.content }}
              <?php if (get_field('long_title') || get_field('long')): ?>
                <h2 class="title_h2_acf"><?= esc_html(get_field('long_title')); ?></h2>
                <p><?= wp_kses_post(get_field('long')); ?></p>
              <?php endif; ?>
              <?php if (get_field('short_title') || get_field('short')): ?>
                <h2 class="title_h2_acf"><?= esc_html(get_field('short_title')); ?></h2>
                <p><?= wp_kses_post(get_field('short')); ?></p>
              <?php endif; ?>
              <h2 class="title_h2_acf">Garantie & Services</h2>
							<ul>
								<li>Montre révisée et garantie 3 ans par notre atelier.</li>
							</ul>
						</div>
						<div class="single__watches__button-container">
							<a class="cta cta__interest" href="{{ interest.url }}">{{ interest.label }}</a> 
							<a class="cta cta__return" href="{{ watches.url }}">{{ watches.label }}</a> 
						</div>
            {% include 'partial/same-spirit.twig' with { post: post } only %}
					</div>
				</div>
			</article>
		</div>

    <!-- ===== MOBILE ===== -->
    <div class="content-wrapper content-wrapper-mobile">
      <article class="post-type-{{ post.post_type }} single__watches mobile" id="post-{{ post.ID }}">
        <div class="single__watches--container">
          <!-- ✅ MOBILE CAROUSEL CSS PUR -->
          <div class="single__watches-images">
            <div class="mobile-carousel">
              <div class="mobile-carousel__track">
                {% if post.images is not empty %}
                  {% for key, galerie in post.images %}
                    <div class="mobile-carousel__slide">
                      <a href="{{ Image(galerie).src }}" data-lightbox="watches-mobile">
                        <img
                          src="{{ Image(galerie).src }}"
                          alt="{{ Image(galerie).alt }}"
                          loading="lazy"
                        />
                      </a>
                    </div>
                  {% endfor %}
                {% else %}
                  <div class="mobile-carousel__slide">
                    <a href="{{ Image(post.thumbnail).src }}" data-lightbox="watch-mobile">
                      <img
                        src="{{ Image(post.thumbnail).src }}"
                        alt="{{ Image(post.thumbnail).alt }}"
                        loading="lazy"
                      />
                    </a>
                  </div>
                {% endif %}
              </div>
            </div>
          </div>

          <!-- TEXTE ET BOUTONS -->
          <div class="single__watches__text-part-wrapper">
            <div class="single__watches__text-part">
              <h1 class="single__watches__title">
                {{ post.title }}
              </h1>
              <div class="single__watches__content">
                {{ post.content }}
              </div>
              <div class="single__watches__button-container">
                <a class="cta cta__interest" href="{{ interest.url }}">{{ interest.label }}</a>
                <a class="cta cta__return" href="{{ watches.url }}">{{ watches.label }}</a>
              </div>
            </div>
          </div>
        </div>
        <!-- ✅ SAME-SPIRIT EN MOBILE -->
        {% include 'partial/same-spirit.twig' with { post: post } only %}
      </article>
    </div>
  {% endfor %}
{% endblock %}
